<!-- <h2 class="text-2xl font-bold mb-6">Booking Approvals</h2>

<div *ngIf="loading">Loading...</div>

<div *ngFor="let booking of bookings"
     class="bg-white p-6 rounded-xl shadow mb-4">

  <h3 class="font-semibold">
    {{ booking.unit_code }}
  </h3>

  <p>User: {{ booking.user_name }}</p>
  <p>{{ booking.lease_start }} → {{ booking.lease_end }}</p>

  <div class="mt-3">

    <span
      class="px-3 py-1 rounded-full text-sm mr-3"
      [ngClass]="{
        'bg-yellow-100 text-yellow-700': booking.status === 'PENDING',
        'bg-green-100 text-green-700': booking.status === 'APPROVED',
        'bg-red-100 text-red-700': booking.status === 'REJECTED'
      }">

      {{ booking.status }}

    </span>

    <button *ngIf="booking.status === 'PENDING'"
            (click)="updateStatus(booking.id, 'APPROVED')"
            class="bg-green-600 text-white px-3 py-1 rounded mr-2">
      Approve
    </button>

    <button *ngIf="booking.status === 'PENDING'"
            (click)="updateStatus(booking.id, 'REJECTED')"
            class="bg-red-600 text-white px-3 py-1 rounded">
      Reject
    </button>

  </div>

</div> -->



<div class="mb-8 flex items-center justify-between">
  <div>
    <h2 class="text-2xl font-bold text-zinc-900 tracking-tight">Booking Approvals</h2>
    <p class="text-sm text-zinc-500">Manage and review incoming lease requests.</p>
  </div>
  <div class="flex gap-2">
    </div>
</div>

<div *ngIf="loading" class="flex justify-center p-12">
  <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
</div>

<div *ngIf="!loading" class="bg-white border border-zinc-200 rounded-xl overflow-hidden shadow-sm">
  <table class="w-full text-left border-collapse">
    <thead class="bg-zinc-50 border-b border-zinc-200">
      <tr>
        <th class="px-6 py-4 text-xs font-semibold uppercase text-zinc-500">Unit Code</th>
        <th class="px-6 py-4 text-xs font-semibold uppercase text-zinc-500">User</th>
        <th class="px-6 py-4 text-xs font-semibold uppercase text-zinc-500">Lease Period</th>
        <th class="px-6 py-4 text-xs font-semibold uppercase text-zinc-500">Status</th>
        <th class="px-6 py-4 text-xs font-semibold uppercase text-zinc-500 text-right">Actions</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-zinc-100">
      <tr *ngFor="let booking of bookings" class="hover:bg-zinc-50/50 transition-colors">
        
        <td class="px-6 py-4">
          <span class="font-mono font-medium text-indigo-600 bg-indigo-50 px-2 py-1 rounded text-sm">
            {{ booking.unit_code }}
          </span>
        </td>

        <td class="px-6 py-4">
          <div class="text-sm font-medium text-zinc-900">{{ booking.user_name }}</div>
          <div class="text-xs text-zinc-500 italic">verified tenant</div>
        </td>

        <td class="px-6 py-4">
          <div class="text-sm text-zinc-600 flex items-center gap-2">
            <span>{{ booking.lease_start }}</span>
            <span class="text-zinc-300">→</span>
            <span>{{ booking.lease_end }}</span>
          </div>
        </td>

        <td class="px-6 py-4 text-sm">
          <span
            class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border"
            [ngClass]="{
              'bg-amber-50 text-amber-700 border-amber-200': booking.status === 'PENDING',
              'bg-emerald-50 text-emerald-700 border-emerald-200': booking.status === 'APPROVED',
              'bg-rose-50 text-rose-700 border-rose-200': booking.status === 'REJECTED',
              'bg-indigo-50 text-indigo-700 border-indigo-200': booking.status === 'COMPLETED',
              'bg-zinc-50 text-zinc-500 border-zinc-200': booking.status === 'CANCELLED'
            }">
            <span class="h-1.5 w-1.5 rounded-full mr-1.5" 
                  [ngClass]="{
                    'bg-amber-500': booking.status === 'PENDING',
                    'bg-emerald-500': booking.status === 'APPROVED',
                    'bg-rose-500': booking.status === 'REJECTED',
                    'bg-indigo-500': booking.status === 'COMPLETED',
                    'bg-zinc-400': booking.status === 'CANCELLED'
                  }"></span>
            {{ booking.status }}
          </span>
        </td>

        <!-- <td class="px-6 py-4 text-right space-x-2">
          <ng-container *ngIf="booking.status === 'PENDING'">
            <button (click)="updateStatus(booking.id, 'APPROVED')"
                    class="text-xs font-semibold text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50 px-3 py-1.5 rounded-md transition-colors">
              Approve
            </button>
            <button (click)="updateStatus(booking.id, 'REJECTED')"
                    class="text-xs font-semibold text-rose-600 hover:text-rose-700 hover:bg-rose-50 px-3 py-1.5 rounded-md transition-colors">
              Reject
            </button>
          </ng-container>
          <button *ngIf="booking.status !== 'PENDING'" class="text-zinc-400 text-xs"></button>
        </td> -->


        <td class="px-6 py-4 text-right space-x-2">

  <!-- PENDING -->
  <ng-container *ngIf="booking.status === 'PENDING'">
    <button (click)="updateStatus(booking.id, 'APPROVED')"
            class="text-xs font-semibold text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50 px-3 py-1.5 rounded-md transition-colors">
      Approve
    </button>
    <button (click)="updateStatus(booking.id, 'REJECTED')"
            class="text-xs font-semibold text-rose-600 hover:text-rose-700 hover:bg-rose-50 px-3 py-1.5 rounded-md transition-colors">
      Reject
    </button>
  </ng-container>

  <!-- APPROVED -->
  
  <ng-container *ngIf="booking.status === 'APPROVED'">
  <!-- <ng-container *ngIf="isBeforeLeaseStart(booking.lease_start); else moveOutBlock">
    <button (click)="cancel(booking.id)"
    class="text-xs font-semibold text-rose-600 hover:text-rose-700 hover:bg-rose-50 px-3 py-1.5 rounded-md transition-colors">
    Cancel Booking
  </button>
</ng-container> -->

<!-- <ng-template #moveOutBlock> -->

      <input
      type="date"
      [(ngModel)]="vacateDates[booking.id]"
      class="border border-zinc-300 rounded-md px-2 py-1 text-xs mr-2"
      />
      <button (click)="moveOut(booking.id)"
      class="text-xs font-semibold text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 px-3 py-1.5 rounded-md transition-colors">
      Move Out
    </button>
  <!-- </ng-template> -->
  </ng-container>

  <!-- COMPLETED -->
  <ng-container *ngIf="booking.status === 'COMPLETED'">
    <span class="text-xs font-semibold text-indigo-600">
      Completed
    </span>
  </ng-container>

  <!-- REJECTED -->
  <ng-container *ngIf="booking.status === 'REJECTED'">
    <span class="text-xs font-semibold text-rose-600">
      Rejected
    </span>
  </ng-container>

</td>

      </tr>
    </tbody>
  </table>
</div>