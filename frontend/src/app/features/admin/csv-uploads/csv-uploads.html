<!-- <p>csv-uploads works!</p>
<div class="bg-white shadow-md rounded-lg p-6 max-w-2xl">

  <h2 class="text-xl font-semibold mb-6 text-zinc-800">
    Bulk Upload Units
  </h2>

  
  <input 
    type="file"
    accept=".csv"
    (change)="onFileSelect($event)"
    class="block w-full text-sm text-zinc-600 
           file:mr-4 file:py-2 file:px-4 
           file:rounded-md file:border-0 
           file:text-sm file:font-semibold 
           file:bg-indigo-600 file:text-white 
           hover:file:bg-indigo-700"
  />

  <button
    (click)="uploadFile()"
    [disabled]="loading"
    class="mt-6 bg-zinc-900 text-white px-6 py-2 rounded-md 
           hover:bg-zinc-800 transition-all"
  >
    {{ loading ? 'Uploading...' : 'Upload CSV' }}
  </button>

  
  <div *ngIf="result" class="mt-6 bg-zinc-50 p-4 rounded-md border">

    <h3 class="font-medium text-zinc-700 mb-2">Upload Result</h3>

    <p class="text-green-600">
      Created: {{ result.created }}
    </p>

    <p class="text-yellow-600">
      Skipped: {{ result.skipped_existing }}
    </p>

    <div *ngIf="result.errors?.length > 0" class="mt-3">
      <p class="text-red-600 font-medium">Errors:</p>
      <pre class="text-xs bg-red-50 p-2 rounded overflow-x-auto">
{{ result.errors | json }}
      </pre>
    </div>

  </div>

</div> -->

































































































<div class="max-w-3xl mx-auto space-y-6">
  
  <div class="mb-8">
    <h2 class="text-3xl font-black text-slate-900 tracking-tight uppercase italic">
      Bulk Data Ingestion
    </h2>
    <p class="text-slate-500 font-medium">Upload your .csv file to update unit records in bulk.</p>
  </div>

  <div class="bg-white shadow-xl shadow-slate-200/50 rounded-3xl border border-slate-100 overflow-hidden">
    <div class="p-8">
      
      <div *ngIf="!selectedFile" class="relative group">
        <label class="flex flex-col items-center justify-center w-full h-64 border-2 border-dashed border-slate-200 rounded-2xl bg-slate-50 hover:bg-slate-100 hover:border-indigo-400 transition-all cursor-pointer overflow-hidden">
          <div class="flex flex-col items-center justify-center pt-5 pb-6">
            <div class="w-16 h-16 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
              </svg>
            </div>
            <p class="mb-2 text-sm text-slate-700 font-bold">Click to upload or drag and drop</p>
            <p class="text-xs text-slate-400 uppercase tracking-widest font-bold">CSV files only</p>
          </div>
          <input type="file" accept=".csv" (change)="onFileSelect($event)" class="hidden" />
        </label>
      </div>

      <div *ngIf="selectedFile" class="flex items-center justify-between p-6 bg-indigo-50 border border-indigo-100 rounded-2xl animate-in fade-in slide-in-from-top-4 duration-300">
        <div class="flex items-center gap-4">
          <div class="text-3xl">ðŸ“„</div>
          <div>
            <p class="text-xs font-bold text-indigo-400 uppercase tracking-widest">Selected File</p>
            <p class="text-lg font-bold text-slate-900">{{ selectedFile.name }}</p>
            <p class="text-xs text-slate-500 font-medium">{{ (selectedFile.size / 1024).toFixed(2) }} KB</p>
          </div>
        </div>
        <button (click)="selectedFile = null" class="text-slate-400 hover:text-rose-500 transition-colors p-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

      <div class="mt-8 flex items-center justify-between gap-4">
        <div class="text-xs font-bold text-slate-400 uppercase tracking-tighter italic">
          {{ selectedFile ? 'Ready to process' : 'No file selected' }}
        </div>
        
       <button
          (click)="uploadFile()"
          [disabled]="loading"
          class="flex items-center gap-3 bg-slate-900 text-white px-8 py-4 rounded-xl font-bold uppercase tracking-widest hover:bg-indigo-600 active:scale-[0.98] transition-all disabled:opacity-50 shadow-lg shadow-slate-200">
          
          <span *ngIf="loading" class="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"></span>
          {{ loading ? 'Processing...' : 'Execute Upload' }}
        </button>
      </div>
    </div>

     <div *ngIf="result" class="border-t border-slate-100 bg-slate-50/50 p-8">
      <div class="flex items-center gap-2 mb-6">
        <div class="h-2 w-2 bg-indigo-500 rounded-full"></div>
        <h3 class="font-black text-slate-900 uppercase tracking-tight text-sm italic">Analysis Result</h3>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
        <div class="bg-white p-5 rounded-2xl border border-emerald-100 shadow-sm flex items-center justify-between">
          <div>
            <p class="text-xs font-bold text-emerald-500 uppercase tracking-widest">Created</p>
            <p class="text-2xl font-black text-slate-900">{{ result.created }}</p>
          </div>
          <div class="text-emerald-500 bg-emerald-50 p-3 rounded-xl text-xl font-bold">âœ“</div>
        </div>

        <div class="bg-white p-5 rounded-2xl border border-amber-100 shadow-sm flex items-center justify-between">
          <div>
            <p class="text-xs font-bold text-amber-500 uppercase tracking-widest">Skipped</p>
            <p class="text-2xl font-black text-slate-900">{{ result.skipped_existing }}</p>
          </div>
          <div class="text-amber-500 bg-amber-50 p-3 rounded-xl text-xl font-bold">!</div>
        </div>
      </div>

      <div *ngIf="result.errors?.length > 0">
        <div class="flex items-center gap-2 mb-3">
          <p class="text-xs font-bold text-rose-500 uppercase tracking-widest">Exception Logs</p>
          <div class="flex-1 h-px bg-rose-100"></div>
        </div>
        <div class="bg-rose-950 text-rose-200 p-4 rounded-xl shadow-inner font-mono text-xs overflow-x-auto border border-rose-900/50">
          <pre>{{ result.errors | json }}</pre>
        </div>
      </div>
    </div>
  </div>
</div>